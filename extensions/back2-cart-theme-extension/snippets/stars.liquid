<link href="{{ 'daisyui.css' | asset_url}}" rel="stylesheet" type="text/css" />
<script src="{{ 'framer-motion.js' | asset_url }}" defer></script>
<script src="{{ 'tailwind.js' | asset_url }}" defer></script>
<script src="{{ 'main.js' | asset_url }}" defer></script>


<style>
  {{ block.settings.heading_font | font_face }}
</style>

{% comment %} TODO location {% endcomment %}

{% assign selected_variant = product.selected_or_first_available_variant %}

{% if selected_variant.available %}
  <p>âœ… En stock : {{ selected_variant.inventory_quantity }}</p>
{% else %}
  <div>

    <div class="h-[{{ block.settings.block_height }}em] w-[{{ block.settings.block_width }}%]">
        <button type="button"
          {% comment %} onclick="my_modal_3.showModal()" {% endcomment %}
          onclick="my_modal_7.checked = true"
          class="
          flex
          items-center 
          justify-{{ block.settings.text_position }}
          bg-[{{ block.settings.colour }}] 
          text-[{{ block.settings.font_size }}px] 
          w-[100%]
          h-[100%]
          rounded-[{{ block.settings.border_radius }}px]
          font-[{{ block.settings.font_weight }}]
          text-[{{ block.settings.text-colour }}]
          pb-[{{ block.settings.padding_bottom }}px]
          pt-[{{ block.settings.padding_top }}px]
          pl-[{{ block.settings.padding_left }}px]
          pr-[{{ block.settings.padding_right }}px]
          mb-[{{ block.settings.margin_bottom }}px]
          mt-[{{ block.settings.margin_top }}px]
          mr-[{{ block.settings.margin_right }}px]
          ml-[{{ block.settings.margin_left }}px]
          "
          style="font-family: {{ block.settings.heading_font.family }}, {{ block.settings.heading_font.fallback_families }};"
          aria-disabled="true">
          <span class="
              {% comment %} pb-[{{ block.settings.txt_padding_bottom }}px]
              pt-[{{ block.settings.txt_padding_top }}px]
              pl-[{{ block.settings.txt_padding_left }}px]
              pr-[{{ block.settings.txt_padding_right }}px] {% endcomment %}
              mb-[{{ block.settings.txt_margin_bottom }}px]
              mt-[{{ block.settings.txt_margin_top }}px]
              mr-[{{ block.settings.txt_margin_right }}px]
              ml-[{{ block.settings.txt_margin_left }}px]
            ">
              {{ block.settings.text }} 
          </span>
        </button> 
    </div>

    <!-- DIALOG MODAL -->
    <input type="checkbox" id="my_modal_7" class="modal-toggle" />
    <div class="modal" role="dialog">
      <div class="modal-box relative rounded-2xl  w-full max-w-4xl">
        
        <div class="flex justify-between items-center text mb-4">
          <p class="text-3xl text-black font-medium tracking-tighter text-center">Notify Me When Available</p>
          <label for="my_modal_7" class="cursor-pointer text-gray-500 hover:text-gray-700">âœ•</label>
        </div>

        <div class="flex justify-center">
          <div class="h-[0.1em] bg-gray-200/50 mt-4 mb-4 w-2/4 max-auto">
          </div>
        </div>


        <form class="max-w-sm mx-auto mt-5" id="subscribe-form">
          <div class="mb-1 mt-2">
            <label for="email" class="block mb-2 text-2xl font-medium text-gray-900 dark:text-white">Email</label>
            <input type="email" id="email" 
              class="bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5
               dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" 
               placeholder="name@flowbite.com" 
               required />
          </div> 
          <div class="flex justify-center mt-5">
            <button type="submit" class="text-[{{ block.settings.text-colour }}] bg-[{{ block.settings.colour }}] text-xl w-full h-[3em] rounded-md shadow-md">Get Notify</button>
          </div>
        </form>
      </div>

      <!-- Backdrop -->
      <label class="modal-backdrop" for="my_modal_7">Close</label>
    </div>

    {% comment %} <dialog id="my_modal_3" class="modal">
      <div class="modal-box">
        <form method="dialog">
          <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
        </form>
        <h3 class="text-lg font-bold">Hello!</h3>
        <p class="py-4">Press ESC key or click on âœ• button to close</p>
        <label className="modal-backdrop" htmlFor="my_modal_3">Close</label>
      </div>
    </dialog> {% endcomment %}

  </div>
{% endif %}

{% comment %} {% assign total_stock = 0 %}
{% for variant in product.variants %}
  {% assign total_stock = total_stock | plus: variant.inventory_quantity %}
{% endfor %}

<div id="back2cart-widget">
  {% if total_stock > 0 %}
    <p class="stock-msg">âœ… En stock : {{ total_stock }} articles</p>
  {% else %}
    <button class="back2cart-btn">ðŸ”” Me prÃ©venir quand dispo</button>
  {% endif %}
</div> {% endcomment %}
